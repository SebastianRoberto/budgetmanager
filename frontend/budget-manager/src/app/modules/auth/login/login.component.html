<div class="auth-page">
  <div class="auth-card">

    <!-- HEADER -->
    <div class="auth-header">
      <h1>Panel Financiero</h1>
      <p>Iniciar Sesi√≥n</p>
    </div>

    <!-- FORM -->
    <form [formGroup]="loginForm" class="auth-form" (ngSubmit)="onSubmit()" [class.form-error]="showFormError">

      <!-- Email Field -->
      <div class="form-field">
        <label>Email</label>
        <div class="input-wrapper">
          <input type="email" formControlName="email" placeholder="tu@email.com"
            [class.valid]="loginForm.get('email')!.valid && loginForm.get('email')!.touched"
            [class.invalid]="emailInvalid" autocomplete="email" />
          <span class="validation-icon" *ngIf="loginForm.get('email')!.touched"
            [class.valid]="loginForm.get('email')!.valid" [class.invalid]="emailInvalid">
            {{ loginForm.get('email')!.valid ? '‚úì' : '‚úó' }}
          </span>
        </div>
        <span class="error-msg" *ngIf="emailInvalid">
          <span class="icon">‚ö†Ô∏è</span>
          Email inv√°lido
        </span>
      </div>

      <!-- Password Field -->
      <div class="form-field">
        <label>Contrase√±a</label>
        <div class="input-wrapper">
          <input type="password" formControlName="password" placeholder="Ingresa tu contrase√±a"
            [class.invalid]="passwordInvalid" autocomplete="current-password" />
        </div>
        <span class="hint">M√≠nimo 8 caracteres</span>
        <span class="error-msg" *ngIf="passwordInvalid">
          <span class="icon">‚ö†Ô∏è</span>
          Contrase√±a requerida (m√≠n. 8 caracteres)
        </span>
      </div>

      <!-- ERROR BANNER -->
      <div class="error-banner" *ngIf="errorMessage">
        <span class="icon">‚ö†Ô∏è</span>
        <p>{{ errorMessage }}</p>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="submit-btn" [class.loading]="loading" [class.success]="loginSuccess"
        [disabled]="loginForm.invalid || loading">
        <span *ngIf="!loading && !loginSuccess">Iniciar sesi√≥n</span>
        <span *ngIf="loading">
          <span class="spinner"></span>
          Verificando...
        </span>
        <span *ngIf="loginSuccess">
          <span class="checkmark">‚úì</span>
          Accediendo...
        </span>
      </button>

    </form>

    <!-- FOOTER with Theme Toggle -->
    <div class="auth-footer">
      <p class="footer-link">
        ¬øNo tienes cuenta?
        <a routerLink="/register">Crear cuenta</a>
      </p>

      <!-- THEME TOGGLE BUTTON -->
      <button class="theme-toggle" (click)="toggleTheme()" type="button">
        <span class="icon">{{ isDarkMode ? '‚òÄÔ∏è' : 'üåô' }}</span>
        <span>{{ isDarkMode ? 'Modo claro' : 'Modo oscuro' }}</span>
      </button>
    </div>

  </div>
</div>